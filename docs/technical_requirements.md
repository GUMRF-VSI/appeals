# Техническое задание на разработку

------------------------------------------------------------------------------------------------------------------------

## 1. Цель проекта

Цель проекта - разработать систему для регистрации и обработки обращений для пользователей и системных администраторов
(далее Система). Пользователь сможет создавать обращения и отслеживать созданные им обращения. Системный администратор
(далее Администратор) будет иметь возможность получать обращения, изменять их статус и брать в исполнение.

------------------------------------------------------------------------------------------------------------------------

## 2. Описание системы

Система состоит из следующих основных частей:

1. Регистрация, аутентификация и авторизация
2. Функционал для пользователей
3. Функционал для администраторов
4. Уведомления об обращениях и изменении статуса обращений
5. (_Возможно_) Назначение задач на исполнителей 

------------------------------------------------------------------------------------------------------------------------

### 2.1 Типы пользователей

Система предусматривает наличие двух типов пользователей: администратор и пользователь. Пользователь создает обращения
и отслеживает статус созданных обращений. Администратор получает обращения, бурет их в работу и изменяет статусы.

------------------------------------------------------------------------------------------------------------------------

### 2.2 Регистрация

Регистрация пользователей будет осуществляться самостоятельно. Для регистрации необходимы следующие данные:

1. email - обязательное поле
2. Фамилия - обязательное поле
3. Имя - обязательное поле
4. Отчество - обязательное поле

Ограничения для данных:

1. email
   - Необходима валидация для того, чтобы пользователь вводил корректный email
   - Только латинские буквы, цифры и спецсимволы 
     - Точка (.)
     - Апостлов (`)
     - Тире (-)
     - Решетка (#)
     - Собака (@)
     - Процент (%)
     - Амперсанд (&)
     - Косая черта (/)
2. Фамилия, Имя, Отчество
   - Только кириллица 

------------------------------------------------------------------------------------------------------------------------

### 2.3 Аутентификация

Аутентификация автора и подписчиков осуществляется по email и одноразовому паролю (или по одноразовой ссылке), 
который приходит на этот email (как реализовано при входе в Skype у Microsoft).

------------------------------------------------------------------------------------------------------------------------

### 2.4 Авторизация 

Авторизация пользователя и администратора будет осуществляться по email и паролю. Пароль 
обязательно должен состоять из не менее чем из 8 символов и обязательно иметь хотя бы одну заглавную букву и хотя бы 
одну цифру. Email обязательно должен быть верифицирован (пользователь должен подтвердить свою почту переходом по ссылке
в письме)

#### 2.4.1 Восстановление пароля.

Восстановление пароля будет осуществляться по ссылке для восстановления пароля, которая будет приходить по почте. **Для 
этого необходимо развернуть отдельный сервис для отправки писем по электронной почте.**

------------------------------------------------------------------------------------------------------------------------

### 2.5 Функционал для пользователя

Пользователь после авторизации (ввода логина и пароля) получает доступ к своему функционалу в Системе. Этот функционал 
состоит из следующих блоков:

1. Редактирование данных профиля
2. Создание обращений 
3. Просмотр созданных обращений
4. Уведомления о выполненных обращениях

#### 2.5.1 Редактирование данный профиля

В этом разделе у автора есть возможность редактирования данных своего профиля:

1. email, 
2. Фамилия Имя Отчество
3. (_Возможно_) Название кафедры
4. (_Возможно_) Аватар

##### 2.5.1.1 Смена пароля

Для смены пароля пользователю необходимо подтвердить свой старый пароль и два раза ввести новый пароль. Новый пароль 
обязательно должен состоять из не менее чем из 8 символов и обязательно иметь хотя бы одну заглавную букву и хотя бы 
одну цифру.

##### 2.5.1.2 Смена email

Должна быть возможность смены email. Email пользователя должен меняться только в том случае, если пользователь 
подтвердил email для смены (через ссылку в письме)

#### 2.5.2 Создание обращений

Обращение должно содержать следующие поля:

1. Тема - краткое описание обращения.

2. Приоритет - выбор из выпадающего списка. Выпадающий список должен содержать следующие варианты приоритетов:

   1. Высокий - должен удовлетворять как минимум одному из следующих условий:

      - неисправность на _преподавательском компьютере/сервере_; 
      - неисправность _на более чем_ на одном компьютере;
      - не работает _более трех приложений_ или _полная неработоспособность_;

   2. Средний - должен удовлетворять как минимум одному из следующих условий:

      - неисправность на _компьютере оператора_; 
      - неисправность на _одном компьютере_;
      - не работает _от одного до трех приложений_ или _одно критически важное приложение_;

   3. Низкий - должен удовлетворять как минимум одному из следующих условий:

      - неисправность на _обычном компьютере_; 
      - неисправность на _одном компьютере_;
      - не работает _одно приложение_;

3. Группа - группа может следующие значения:

   1. IT
      - Отказ в работе приложений

   2. DevOps
      - Проблемы в работе программ на сервере

   3. СисАдмин
      - Проблемы в работе сервера, проблемы в работе интернета

4. Тело - боле подробное описание проблемы, чем тема. (_Возможно_) добавить прикрепление изображений.

(_Возможно_) Разбить создание обращение на несколько этапов. 
1. Выбор типа неисправности

   1. Тип неисправности
      - Отказ в работе приложений (группа IT)
      - Проблемы в работе программ на сервере (группа DevOps)
      - Проблемы в работе сервера, проблемы в работе интернета (группа СисАдмин)

2. Выбор приоритета - пользователь выбирает наиболее подходящие значения из вариантов, после чего, на основе его ответов
обращению присваивается приоритет:

   1. Назначение компьютера 
      - Преподавательский/Сервер
      - Оператора
      - Обычный

   2. Количество компьютеров/серверов с неисправностью
      - один
      - более одного

   3. Количество не рабочих приложений (только IT, DevOps)
      - одно приложение
      - от одного до трех приложений
      - более трех приложений

   4. Тип приложения(ий) (только IT, DevOps)
      - некритическое приложение
      - критическое приложение

3. Заполнения темы и тела обращения

#### 2.5.3 Просмотр созданных обращений

При просмотре созданных уведомлений пользователь должен получать список всех своих обращений с пагинацией и возможностью
поиска по теме обращения.

#### 2.5.4 Уведомления о выполненных обращениях

При изменении статуса обращений пользователь должен получать уведомление. Уведомления должны быть реализованы при помощи
технологии [WebSocket](https://ru.wikipedia.org/wiki/WebSocket)

------------------------------------------------------------------------------------------------------------------------

### 2.6 Функционал для администратора

Важно!
Для администраторов данные для входа необходимо получать у главного администратора системы.

Пользователь после авторизации (ввода логина и пароля) получает доступ к своему функционалу в Системе. Этот функционал 
состоит из следующих блоков:

1. Редактирование данных профиля
2. Взятие обращений в работу/выполнение обращений
3. Просмотр всех обращений
4. Уведомления о поступивших обращениях 

#### 2.6.1 Редактирование данных профиля

В этом разделе у автора есть возможность редактирования данных своего профиля:

1. email, 
2. Фамилия Имя Отчество
3. (_Возможно_) Название кафедры
4. (_Возможно_) Аватар

##### 2.6.1.1 Смена пароля

Для смены пароля пользователю необходимо подтвердить свой старый пароль и два раза ввести новый пароль. Новый пароль 
обязательно должен состоять из не менее чем из 8 символов и обязательно иметь хотя бы одну заглавную букву и хотя бы 
одну цифру.

##### 2.6.1.2 Смена email

Для смены email необходимо обращаться к главному администратору системы.

#### 2.6.2 Взятие обращений в работу/выполнение обращений

##### 2.6.2.1 "Взять в работу"

Для администратора должна быть функция "взять в работу" для обращения, после чего у обращения меняется статус на 
"В работе", в качестве исполнителя ставится администратор взявший в работу обращение и пользователю приходит 
оповещение об изменении статуса у обращения. Уведомления должны быть реализованы при помощи
технологии [WebSocket](https://ru.wikipedia.org/wiki/WebSocket)

##### 2.6.2.2 Выполнение обращения
Для администратора должна быть функция "Выполнить" обращение, после чего у обращения меняется статус на 
"Выполнено" и пользователю приходит оповещение об изменении статуса у обращения. Уведомления должны быть реализованы 
при помощи технологии [WebSocket](https://ru.wikipedia.org/wiki/WebSocket)

(_Возможно_) Понадобится добавить изображение и текст для подтверждения выполнения обращения.

#### 2.6.3 Просмотр всех обращений

Для администратора должна быть возможность просмотра всех обращений с пагинацией и фильтрами, в том числе и по 
исполнителю.

#### 2.6.4 Уведомления о поступивших обращениях 

Администратору должны поступать уведомлания о новых обращениях. Уведомления должны быть реализованы при помощи
технологии [WebSocket](https://ru.wikipedia.org/wiki/WebSocket)

------------------------------------------------------------------------------------------------------------------------

## 3. Предлагаемый стек технологий

------------------------------------------------------------------------------------------------------------------------

## 4. Требования в Frontend

Помимо классического веб приложения, необходимо реализовать, по возможности, PDA или адаптивную верстку, чтобы она 
красиво смотрелась на мобильных устройствах.

------------------------------------------------------------------------------------------------------------------------